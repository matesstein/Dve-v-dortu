<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>·¥Ö·¥è·¥ç√°·¥Ñ√≠ Íú± ü·¥Ä·¥Ö·¥ã·¥èÍú±·¥õ…™ ·¥¢ ‚ù§Ô∏è</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,500;9..144,700&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg-pink: #f9b6d7;
      --bg-rose: #f493c3;
      --cream: #fff8ef;
      --cream-2: #fff3e3;
      --sky: #cbeeff;
      --lemon: #ffe9a7;
      --peach: #ffd9ba;
      --berry: #a34f71;
      --ink: #4c3550;
      --soft-border: #f0d3e0;
      --gold: #bf9558;
    }

    * {
      box-sizing: border-box;
    }

    [hidden] {
      display: none !important;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Nunito", sans-serif;
      font-size: clamp(1rem, 0.95rem + 0.25vw, 1.125rem);
      line-height: 1.65;
      color: var(--ink);
      background:
        radial-gradient(circle at 8% 15%, rgba(255, 248, 210, 0.6), transparent 35%),
        radial-gradient(circle at 88% 10%, rgba(255, 224, 245, 0.65), transparent 38%),
        radial-gradient(circle at 80% 82%, rgba(203, 238, 255, 0.78), transparent 42%),
        linear-gradient(135deg, var(--bg-pink) 0%, var(--bg-rose) 100%);
      padding: 28px;
      position: relative;
      overflow-x: hidden;
    }

    body::before,
    body::after {
      content: "";
      position: fixed;
      pointer-events: none;
      z-index: 0;
      opacity: 0.1;
      background-repeat: repeat;
      background-size: 170px 170px;
    }

    body::before {
      inset: 0 52% 0 0;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'%3E%3Ctext x='18' y='74' font-size='44'%3E%F0%9F%A7%81%3C/text%3E%3C/svg%3E");
      background-position: 18px 26px;
    }

    body::after {
      inset: 0 0 0 52%;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'%3E%3Ctext x='20' y='74' font-size='42'%3E%F0%9F%8D%B0%3C/text%3E%3C/svg%3E");
      background-position: 38px 62px;
      opacity: 0.09;
    }

    .wrapper {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      gap: 24px;
      background: linear-gradient(160deg, rgba(255, 205, 230, 0.92), rgba(255, 236, 186, 0.82));
      border: 2px solid rgba(255, 255, 255, 0.65);
      border-radius: 34px;
      padding: 16px;
      box-shadow: 0 28px 52px rgba(134, 70, 99, 0.24);
      position: relative;
      overflow: hidden;
      z-index: 1;
    }

    .wrapper::before {
      content: "";
      position: absolute;
      left: 20px;
      right: 20px;
      top: 86px;
      height: 14px;
      border-radius: 999px;
      background:
        radial-gradient(circle at 7px 7px, rgba(255, 255, 255, 0.95) 6px, transparent 6px) 0 0/24px 14px repeat-x,
        linear-gradient(90deg, #ffb7db, #ffe48f, #bce8ff);
      opacity: 0.88;
      pointer-events: none;
    }

    .hero {
      position: relative;
      overflow: hidden;
      border-radius: 30px;
      padding: 40px 42px 36px;
      background:
        radial-gradient(circle at 100% 0%, rgba(255, 255, 255, 0.6), transparent 25%),
        linear-gradient(130deg, rgba(255, 248, 239, 0.95), rgba(255, 235, 244, 0.92));
      border: 1px solid var(--soft-border);
      box-shadow: 0 8px 18px rgba(113, 62, 86, 0.14);
      text-align: center;
    }

    .hero::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(100deg, transparent 20%, rgba(255, 255, 255, 0.75) 50%, transparent 80%);
      transform: translateX(-100%);
      animation: shine 7s ease-in-out infinite;
      pointer-events: none;
    }

    .hero::after {
      content: "";
      position: absolute;
      top: -56px;
      right: -56px;
      width: 170px;
      height: 170px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff7ca, #ffd8a9);
      opacity: 0.45;
    }

    @keyframes shine {
      0%, 78% { transform: translateX(-110%); }
      100% { transform: translateX(110%); }
    }

    .hero-title {
      margin: 0;
      font-family: "Fraunces", serif;
      font-size: clamp(3rem, 5vw, 4rem);
      letter-spacing: 0.02em;
      line-height: 1.08;
    }

    .hero-title a {
      text-decoration: none;
      background: linear-gradient(145deg, #f8eec4 0%, var(--gold) 42%, #fff8d9 85%);
      color: transparent;
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-stroke: 0.7px rgba(0, 0, 0, 0.32);
      text-shadow: 0 1px 0 rgba(255, 255, 255, 0.55), 0 4px 10px rgba(0, 0, 0, 0.18), 0 8px 20px rgba(191, 149, 88, 0.24);
      transition: filter 0.25s ease, transform 0.25s ease, letter-spacing 0.25s ease;
      display: inline-block;
    }

    .hero-title a:hover {
      filter: saturate(1.2);
      transform: translateY(-1px);
      letter-spacing: 0.05em;
    }

    .hero p {
      margin: 10px 0 0;
      max-width: 68ch;
      font-size: 1rem;
      opacity: 0.9;
    }

    .layout {
      display: grid;
      grid-template-columns: 360px 1fr;
      gap: 16px;
      min-height: 0;
      height: auto;
      align-items: start;
      background: linear-gradient(155deg, rgba(255, 243, 202, 0.86), rgba(255, 217, 237, 0.84));
      border: 1px solid rgba(255, 255, 255, 0.7);
      border-radius: 28px;
      padding: 14px;
      box-shadow: inset 0 0 0 1px rgba(255, 240, 249, 0.8);
    }

    .nest {
      border-radius: 22px;
      padding: 10px;
      background: linear-gradient(180deg, rgba(255, 252, 239, 0.78), rgba(255, 232, 243, 0.72));
      border: 1px solid rgba(255, 255, 255, 0.75);
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.7);
      min-height: auto;
      height: fit-content;
      display: flex;
    }

    .cakes,
    .detail {
      background: linear-gradient(180deg, rgba(255, 250, 241, 0.97), rgba(255, 239, 227, 0.92));
      border: 1px solid rgba(255, 255, 255, 0.75);
      border-radius: 24px;
      box-shadow: 0 18px 34px rgba(111, 55, 79, 0.18);
      min-height: 0;
    }

    .cakes {
      padding: 12px;
      width: 100%;
      display: flex;
      flex-direction: column;
      min-height: auto;
      overflow-x: hidden;
      gap: 8px;
    }

    .cakes h2 {
      margin: 4px 6px 10px;
      font-family: "Fraunces", serif;
      font-size: 1.55rem;
      font-weight: 700;
      color: #6b3c58;
    }

    .detail-head h3 {
      margin: 8px 8px 6px;
      font-family: "Fraunces", serif;
      font-size: 1.75rem;
      font-weight: 700;
      color: #6b3c58;
    }

    .detail-head p {
      margin: 0 8px 8px;
      font-size: 1rem;
      line-height: 1.58;
      opacity: 0.88;
    }

    .cake-list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: grid;
      gap: 7px;
      flex: 0 0 auto;
      min-height: auto;
      overflow-y: visible;
      overflow-x: hidden;
      padding-right: 0;
      align-content: start;
    }

    .builder {
      border-radius: 14px;
      border: 1px solid rgba(239, 196, 216, 0.95);
      background: linear-gradient(120deg, rgba(255, 244, 223, 0.94), rgba(255, 223, 240, 0.9));
      padding: 8px;
      flex-shrink: 0;
    }

    .builder-toggle {
      width: 100%;
      border: 1px solid #d89fbb;
      background: linear-gradient(120deg, #ffe9f4, #fff1cb);
      color: var(--ink);
      border-radius: 11px;
      padding: 8px 10px;
      text-align: left;
      font: inherit;
      font-size: 0.9rem;
      font-weight: 700;
      cursor: pointer;
      transition: border-color 0.2s ease, background 0.2s ease;
    }

    .builder-toggle:hover,
    .builder-toggle.open {
      border-color: #c47aa2;
      background: linear-gradient(120deg, #ffdceb, #ffe8ac);
    }

    .builder-panel {
      border: 1px solid rgba(226, 175, 202, 0.9);
      border-radius: 11px;
      background: rgba(255, 251, 246, 0.8);
      padding: 12px;
      max-height: none;
      min-height: 0;
      overflow-y: auto;
      display: grid;
      gap: 10px;
    }

    .builder-view {
      min-height: 0;
      display: grid;
      grid-template-rows: auto 1fr;
      gap: 12px;
    }

    .builder-view .detail-head h3 {
      margin-bottom: 4px;
    }

    .builder-view .detail-head p {
      margin-bottom: 0;
    }

    .builder-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
    }

    .builder-group h3 {
      margin: 0 0 6px;
      font-family: "Fraunces", serif;
      font-size: 1rem;
      font-weight: 700;
      color: #6b3c58;
    }

    .builder-options {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .builder-option {
      border: 1px solid #efc4d8;
      background: #fff8f2;
      color: var(--ink);
      border-radius: 999px;
      padding: 5px 9px;
      font: inherit;
      font-size: 0.8rem;
      line-height: 1.25;
      cursor: pointer;
      transition: background 0.2s ease, border-color 0.2s ease;
    }

    .builder-option.active {
      background: linear-gradient(120deg, #ffd4e7, #ffe4ac);
      border-color: #cf8aaa;
    }

    .builder-summary {
      margin: 0;
      padding: 0;
      list-style: none;
      display: grid;
      gap: 4px;
    }

    .builder-summary li {
      font-size: 0.78rem;
      line-height: 1.35;
      color: #5a4454;
    }

    .builder-reset {
      margin-top: 8px;
      width: 100%;
      border: 1px solid #ddafbf;
      background: #fff7f2;
      color: #5d3d4f;
      border-radius: 9px;
      padding: 6px 9px;
      font: inherit;
      font-size: 0.78rem;
      cursor: pointer;
    }

    .builder-copy {
      margin-top: 8px;
      width: 100%;
      border: 1px solid #c78fab;
      background: linear-gradient(120deg, #ffe9f4, #fff1cb);
      color: #5d3d4f;
      border-radius: 9px;
      padding: 7px 9px;
      font: inherit;
      font-size: 0.8rem;
      font-weight: 700;
      cursor: pointer;
    }

    .cake-btn {
      width: 100%;
      border: 1px solid #efc4d8;
      background: linear-gradient(120deg, #fff4df, #ffdff0);
      color: var(--ink);
      border-radius: 14px;
      padding: 7px 10px;
      text-align: left;
      font: inherit;
      font-weight: 700;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease, background 0.2s ease;
    }

    .cake-btn:hover,
    .cake-btn:focus-visible,
    .cake-btn.active {
      outline: none;
      transform: none;
      border-color: #dd83b1;
      background: linear-gradient(105deg, #ffcae2, #ffe28f);
      box-shadow: 0 9px 18px rgba(141, 75, 106, 0.22);
    }

    .cake-btn-inner {
      display: flex;
      align-items: center;
      gap: 8px;
      min-width: 0;
    }

    .cake-emoji {
      width: 28px;
      height: 28px;
      border-radius: 9px;
      display: grid;
      place-items: center;
      font-size: 0.86rem;
      background: linear-gradient(145deg, #fff5c4, #ffd4e8);
      border: 1px solid rgba(255, 255, 255, 0.95);
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.85);
      flex-shrink: 0;
    }

    .cake-emoji-img {
      width: 28px;
      height: 28px;
      border-radius: 9px;
      object-fit: cover;
      border: 1px solid rgba(255, 255, 255, 0.95);
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.85);
      flex-shrink: 0;
      background: #fff7f2;
      display: block;
    }

    .cake-name {
      font-size: 0.95rem;
      line-height: 1.25;
      overflow-wrap: anywhere;
    }

    .cake-btn.active .cake-emoji,
    .cake-btn:hover .cake-emoji {
      background: linear-gradient(145deg, #fff2a9, #ffc4e3);
      transform: rotate(-4deg);
    }

    .cake-btn.active .cake-emoji-img,
    .cake-btn:hover .cake-emoji-img {
      transform: rotate(-4deg);
    }

    @media (hover: none) and (pointer: coarse) {
      .cake-btn,
      .cake-btn:hover,
      .cake-btn:focus-visible,
      .cake-btn.active {
        transform: none;
      }
    }

    .detail {
      padding: 16px 16px 18px;
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: 16px;
      overflow: hidden;
      width: 100%;
    }

    .detail-body {
      display: grid;
      grid-template-columns: minmax(0, 1.08fr) minmax(0, 0.92fr);
      gap: 16px;
      min-height: 0;
    }

    .photo-wrap {
      position: relative;
      border-radius: 20px;
      overflow: hidden;
      min-height: 0;
      height: 100%;
      background:
        radial-gradient(circle at 50% 0%, rgba(255, 255, 255, 0.75), transparent 45%),
        linear-gradient(180deg, #fff9f2 0%, #fff2e7 100%);
      box-shadow: inset 0 0 0 1px rgba(255, 239, 251, 0.9);
    }

    .photo-wrap::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background: radial-gradient(
        ellipse at center,
        rgba(255, 245, 236, 0) 58%,
        rgba(255, 245, 236, 0.35) 78%,
        rgba(255, 245, 236, 0.8) 100%
      );
      z-index: 2;
    }

    .cake-photo {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      padding: 16px;
      -webkit-mask-image: radial-gradient(ellipse at center, #000 64%, rgba(0, 0, 0, 0.85) 78%, transparent 100%);
      mask-image: radial-gradient(ellipse at center, #000 64%, rgba(0, 0, 0, 0.85) 78%, transparent 100%);
      transition: transform 0.25s ease;
    }

    .info {
      min-height: 0;
      display: flex;
      flex-direction: column;
    }

    .tiles {
      margin: 0;
      padding: 0;
      list-style: none;
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      overflow-y: auto;
      padding-right: 2px;
    }

    .tile {
      border-radius: 16px;
      background: linear-gradient(120deg, #fff4df, #ffdff0);
      border: 1px solid #efc4d8;
      padding: 11px 12px;
      min-height: 86px;
    }

    .tile-title {
      margin: 0 0 6px;
      font-size: 0.82rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #99647d;
    }

    .tile-text {
      margin: 0;
      font-size: 1rem;
      line-height: 1.58;
    }

    .hint {
      margin: 12px 0 0;
      font-size: 0.9rem;
      opacity: 0.7;
    }

    @media (max-width: 920px) {
      body {
        padding: 14px;
      }

      .wrapper {
        padding: 10px;
      }

      .wrapper::before {
        top: 76px;
        left: 12px;
        right: 12px;
      }

      .layout {
        grid-template-columns: 1fr;
        height: auto;
        min-height: unset;
      }

      .nest:first-child {
        order: 1;
      }

      .nest:last-child {
        order: 2;
      }

      .photo-wrap {
        min-height: 320px;
        height: 320px;
      }

      .detail-body {
        grid-template-columns: 1fr;
      }

      .tiles {
        grid-template-columns: 1fr;
      }

      .builder-grid {
        grid-template-columns: 1fr;
      }

      .hero {
        padding: 26px 20px;
      }
    }
  </style>
</head>
<body>
  <main class="wrapper">
    <section class="hero" aria-label="Hlavn√≠ nadpis">
      <h1 class="hero-title">
        <a id="instagram-link" href="https://www.instagram.com/dve_v_dortu?igsh=MTh0eXEwb2V3MHhlMw==" target="_blank" rel="noopener noreferrer">Dvƒõ v dortu</a>
      </h1>
    </section>

    <section class="layout" aria-label="Katalog dort≈Ø">
      <div class="nest">
        <aside class="cakes" aria-label="Seznam dort≈Ø">
          <h2>Na≈°e dorty</h2>
          <ul class="cake-list" id="cake-list"></ul>
          <section class="builder" aria-label="Sestav si s√°m">
            <button id="builder-toggle" class="builder-toggle" type="button" aria-expanded="false" aria-controls="builder-view">
              Sestav si s√°m
            </button>
          </section>
        </aside>
      </div>

      <div class="nest">
        <article class="detail" aria-live="polite">
          <div id="cake-view">
            <div class="detail-head">
              <h3 id="cake-name"></h3>
              <p id="cake-description"></p>
            </div>
            <div class="detail-body">
              <div class="photo-wrap" id="photo-wrap">
                <img id="cut-photo" class="cake-photo cut" src="" alt="Pr≈Ø≈ôez dortu" />
              </div>
              <div class="info">
                <ul class="tiles" id="tiles"></ul>
              </div>
            </div>
          </div>

          <div id="builder-view" class="builder-view" hidden>
            <div class="detail-head">
              <h3>Sestav si s√°m</h3>
              <p>Vyberte si vlastn√≠ kombinaci. Dort mus√≠ v≈ædy obsahovat korpus a kr√©m. V≈°e ostatn√≠ je ƒçistƒõ na va≈°√≠ chuti a preferenc√≠ch. ‚ù§Ô∏è</p>
            </div>
            <div id="builder-panel" class="builder-panel">
              <div class="builder-grid">
                <section class="builder-group" data-key="base">
                  <h3>Korpusy</h3>
                  <div class="builder-options"></div>
                </section>
                <section class="builder-group" data-key="cream">
                  <h3>Kr√©my</h3>
                  <div class="builder-options"></div>
                </section>
                <section class="builder-group" data-key="fruit">
                  <h3>Ovoce</h3>
                  <div class="builder-options"></div>
                </section>
                <section class="builder-group" data-key="compote">
                  <h3>Ovocn√© kompot√©</h3>
                  <div class="builder-options"></div>
                </section>
                <section class="builder-group" data-key="inserts">
                  <h3>Vklady</h3>
                  <div class="builder-options"></div>
                </section>
              </div>
              <ul id="builder-summary" class="builder-summary"></ul>
              <button id="builder-copy" class="builder-copy" type="button">Zkop√≠rovat v√Ωbƒõr</button>
              <button id="builder-reset" class="builder-reset" type="button">Vymazat v√Ωbƒõr</button>
            </div>
          </div>
        </article>
      </div>
    </section>
  </main>

  <script>
    const cakes = [
      {
        emoji: "üç´",
        name: "ƒåokol√°da & Vi≈°nƒõ",
        description: "Vl√°ƒçn√Ω kakaov√Ω dort s ƒçokol√°dov√Ωm kr√©mem a vi≈°≈àov√Ωm kompot√©.",
        base: "Vl√°ƒçn√Ω kakaov√Ω korpus",
        cream: "ƒåokol√°dov√Ω ≈°lehan√Ω kr√©m",
        fruit: "Vi≈°≈àov√© kompot√©",
        extras: "ƒåokol√°dov√© k≈ôupav√© kuliƒçky",
        wholeImage: "https://images.unsplash.com/photo-1578985545062-69928b1d9587?auto=format&fit=crop&w=1400&q=80",
        cutImage: "images/Coko_visen.jpeg"
      },
      {
        emoji: "ü••",
        name: "Raffaelo s mangem",
        description: "Mandlov√Ω korpus, jemn√Ω kokosovo-ƒçokol√°dov√Ω kr√©m a mangov√© pyr√©.",
        base: "Mandlov√Ω korpus",
        cream: "Kr√©m z b√≠l√© ƒçokol√°dy, smetany a kokosu",
        fruit: "Mangov√© pyr√©",
        extras: "ƒåokol√°dovo-kokosov√° k≈ôupka",
        wholeImage: "https://images.unsplash.com/photo-1535141192574-5d4897c12636?auto=format&fit=crop&w=1400&q=80",
        cutImage: "images/Raffaelo_s_mangem.jpeg"
      },
      {
        emoji: "üçì",
        name: "Pi≈°kot, ≈°lehaƒçka & jahody",
        description: "Lehk√Ω ovocn√Ω dort s vanilkov√Ωm pi≈°kotem, lehk√Ωm kr√©mem a jahodama.",
        base: "Vanilkov√Ω pi≈°kot",
        cream: "≈†lehaƒçka s mascarpone",
        fruit: "ƒåerstv√© jahody / jahodov√© kompot√©",
        extras: "Jahodov√© ≈æel√©, promaz√°no pyr√© z ƒçerstv√Ωch jahod",
        wholeImage: "https://images.unsplash.com/photo-1559620192-032c4bc4674e?auto=format&fit=crop&w=1400&q=80",
        cutImage: "images/Jahoda_piskot.jpeg"
      },
      {
        emoji: "üçØ",
        name: "Karamel svƒõtl√Ω",
        description: "Nad√Ωchanƒõj≈°√≠ karamelov√Ω dort s mandlov√Ωm korpusem a k≈ôupkami.",
        base: "Mandlov√Ω korpus",
        cream: "Karamelov√Ω ≈°lehan√Ω kr√©m",
        fruit: "Bez ovoce",
        extras: "K≈ôupky uvnit≈ô",
        wholeImage: "https://images.unsplash.com/photo-1565958011703-44f9829ba187?auto=format&fit=crop&w=1400&q=80",
        cutImage: "images/Karamel_svetly.jpeg"
      },
      {
        emoji: "üíó",
        name: "Malina & pist√°cie",
        description: "Spojen√≠ malinov√©ho rozvaru, pist√°ciov√©ho kr√©mu a vl√°ƒçn√©ho pi≈°kotu.",
        base: "Vl√°ƒçn√Ω pi≈°kot",
        cream: "Jemn√Ω pist√°ciov√Ω kr√©m",
        fruit: "Malinov√Ω rozvar",
        extras: "Pist√°cie",
        wholeImage: "https://images.unsplash.com/photo-1614707267537-b85aaf00c4b7?auto=format&fit=crop&w=1400&q=80",
        cutImage: "https://images.unsplash.com/photo-1624353365286-3f8d62daad51?auto=format&fit=crop&w=1400&q=80"
      },
      {
        emoji: "üçè",
        name: "Jablko",
        description: "Lehk√Ω kr√©m z tvarohu a mascarpone s jablkovo-sko≈ôicov√Ωm pi≈°kotem.",
        base: "Jablkovo-sko≈ôicov√Ω pi≈°kot",
        cream: "Kr√©m z tvarohu a mascarpone",
        fruit: "Karamelizovan√° jablka",
        extras: "Karamelov√° k≈ôupka",
        wholeImage: "https://images.unsplash.com/photo-1599785209796-786432b228bc?auto=format&fit=crop&w=1400&q=80",
        cutImage: "images/Jablko_skorice.jpeg"
      },
      {
        emoji: "üçã",
        name: "Bor≈Øvkov√°-citron",
        description: "Svƒõ≈æ√≠ vanilkovo-citronov√Ω dort s bor≈Øvkov√Ωm rozvarem a pƒõnou.",
        base: "Lehk√Ω vanilkovo-citronov√Ω korpus",
        cream: "Smetanov√Ω kr√©m",
        fruit: "Bor≈Øvkov√Ω rozvar",
        extras: "Bor≈Øvkov√° pƒõna",
        wholeImage: "https://images.unsplash.com/photo-1623428454614-abaf00244e52?auto=format&fit=crop&w=1400&q=80",
        cutImage: "images/Boruvka_citron.jpeg"
      },
      {
        emoji: "üíï",
        name: "Malina se ≈°lehaƒçkou",
        description: "Nad√Ωchan√Ω vanilkov√Ω pi≈°kot s malinov√Ωm pyr√©, kr√©mem a mousse.",
        base: "Nad√Ωchan√Ω vanilkov√Ω pi≈°kot",
        cream: "Kr√©m z mascarpone a ≈°lehaƒçky",
        fruit: "Malinov√© pyr√© a malinov√Ω rozvar",
        extras: "Mousse z b√≠l√© ƒçokol√°dy a malinov√©ho pyr√©",
        wholeImage: "https://images.unsplash.com/photo-1606313564200-e75d5e30476c?auto=format&fit=crop&w=1400&q=80",
        cutImage: "images/Svezi_malina.jpeg"
      },
      {
        emoji: "ü´ê",
        name: "Makov√Ω dort s povidly",
        description: "Makov√Ω korpus s dom√°c√≠mi povidly, kr√©mem a ≈°vestkov√Ωm kompotem.",
        base: "Nad√Ωchan√Ω makov√Ω korpus",
        cream: "≈†lehan√Ω kr√©m z b√≠l√© ƒçokol√°dy, tvarohu, ≈°lehaƒçky a m√°ku",
        fruit: "≈†vestkov√Ω kompot√©",
        extras: "Mousse z b√≠l√© ƒçokol√°dy, ≈°lehaƒçky a ≈°vestek",
        wholeImage: "https://images.unsplash.com/photo-1624353365286-3f8d62daad51?auto=format&fit=crop&w=1400&q=80",
        cutImage: "images/Mak_povidla.jpeg"
      },
      {
        emoji: "ü•ú",
        name: "Snickers dort",
        description: "Vl√°ƒçn√Ω kakaov√Ω korpus, jemn√Ω kr√©m z b√≠l√© ƒçokol√°dy, slan√Ω karamel a k≈ôupav√Ω ara≈°√≠dov√Ω vklad v ƒçokol√°dƒõ.",
        base: "Vl√°ƒçn√Ω kakaov√Ω korpus",
        cream: "Kr√©m ze ≈°lehan√© gan√°≈æe z b√≠l√© ƒçokol√°dy",
        fruit: "Bez ovoce",
        extras: "Slan√Ω karamel, ara≈°√≠dy v karamelu, k≈ôupav√° ho≈ôk√° ƒçokol√°da",
        wholeImage: "https://images.unsplash.com/photo-1607478900766-efe13248b125?auto=format&fit=crop&w=1400&q=80",
        cutImage: "images/Snickers.jpeg"
      }
    ];

    const listEl = document.getElementById("cake-list");
    const cutPhotoEl = document.getElementById("cut-photo");
    const cakeNameEl = document.getElementById("cake-name");
    const cakeDescriptionEl = document.getElementById("cake-description");
    const tilesEl = document.getElementById("tiles");
    const cakeViewEl = document.getElementById("cake-view");
    const builderViewEl = document.getElementById("builder-view");
    const builderToggleEl = document.getElementById("builder-toggle");
    const builderPanelEl = document.getElementById("builder-panel");
    const builderSummaryEl = document.getElementById("builder-summary");
    const builderCopyEl = document.getElementById("builder-copy");
    const builderResetEl = document.getElementById("builder-reset");

    const tileMeta = [
      { key: "base", label: "Z√°klad" },
      { key: "cream", label: "Kr√©m" },
      { key: "fruit", label: "Ovoce" },
      { key: "extras", label: "Dopl≈àky" }
    ];

    const builderMeta = [
      { key: "base", label: "Korpusy", multi: false },
      { key: "cream", label: "Kr√©my", multi: false },
      { key: "fruit", label: "Ovoce", multi: false },
      { key: "compote", label: "Ovocn√© kompot√©", multi: false },
      { key: "inserts", label: "Vklady", multi: true }
    ];

    const builderFixedOptions = {
      base: [
        "Vanilkov√Ω",
        "Citronov√Ω",
        "Kakaov√Ω",
        "Red velvet",
        "Pist√°ciov√Ω",
        "Mrkvov√Ω",
        "Makov√Ω",
        "Jableƒçn√Ω"
      ],
      fruit: [
        "Maliny",
        "Jahody",
        "Bor≈Øvky",
        "Lesn√≠ smƒõs",
        "Mango",
        "Citron",
        "T≈ôe≈°nƒõ",
        "bez ovoce"
      ],
      compote: [
        "T≈ôe≈°nƒõ",
        "Vi≈°nƒõ",
        "Mango",
        "Jahody",
        "Maliny",
        "Bor≈Øvky"
      ],
      inserts: [
        "Ovocn√Ω ≈æel√© disk",
        "Sekan√© o≈ôechy v karamelu",
        "Karamel",
        "K≈ôupav√° vrstva: kokos, ƒçokol√°da, karamel",
        "ƒåokol√°dov√© k≈ôupav√© kuliƒçky",
        "Ovocn√° mousse (pƒõna) s b√≠lou ƒçokol√°dou"
      ],
      cream: [
        "≈†lehaƒçka-Mascarpone",
        "Mascarpone-tvaroh",
        "B√≠l√° ƒçokol√°da",
        "Ml√©ƒçn√° ƒçokol√°da",
        "Kokosov√Ω",
        "Karamelov√Ω",
        "Makov√Ω"
      ]
    };

    const builderSelection = {
      base: null,
      cream: null,
      fruit: null,
      compote: null,
      inserts: new Set()
    };

    const builderMultiKeys = new Set(builderMeta.filter((meta) => meta.multi).map((meta) => meta.key));

    let activeIndex = -1;

    function setBuilderMode(enabled) {
      builderViewEl.hidden = !enabled;
      cakeViewEl.hidden = enabled;
      builderToggleEl.classList.toggle("open", enabled);
      builderToggleEl.setAttribute("aria-expanded", String(enabled));
    }

    function renderCake(index) {
      if (index === activeIndex) {
        return;
      }

      const cake = cakes[index];
      activeIndex = index;

      cutPhotoEl.src = cake.cutImage;
      cutPhotoEl.alt = `Prurez dortu: ${cake.name}`;
      cakeNameEl.textContent = cake.name;
      cakeDescriptionEl.textContent = cake.description;

      tilesEl.innerHTML = "";
      tileMeta.forEach((tile) => {
        const li = document.createElement("li");
        li.className = "tile";

        const title = document.createElement("p");
        title.className = "tile-title";
        title.textContent = tile.label;

        const text = document.createElement("p");
        text.className = "tile-text";
        text.textContent = cake[tile.key];

        li.append(title, text);
        tilesEl.appendChild(li);
      });

      document.querySelectorAll(".cake-btn").forEach((btn, btnIndex) => {
        btn.classList.toggle("active", btnIndex === index);
      });
    }

    function getUniqueOptions(key) {
      if (builderFixedOptions[key]) {
        return builderFixedOptions[key];
      }
      return [...new Set(cakes.map((cake) => (cake[key] || "").trim()).filter(Boolean))];
    }

    function renderBuilderSummary() {
      builderSummaryEl.innerHTML = "";

      const base = document.createElement("li");
      base.textContent = `Korpusy: ${builderSelection.base || "nevybr√°no"}`;
      const cream = document.createElement("li");
      cream.textContent = `Kr√©my: ${builderSelection.cream || "nevybr√°no"}`;
      const fruit = document.createElement("li");
      fruit.textContent = `Ovoce: ${builderSelection.fruit || "nevybr√°no"}`;
      const compote = document.createElement("li");
      compote.textContent = `Ovocn√© kompot√©: ${builderSelection.compote || "nevybr√°no"}`;
      const inserts = document.createElement("li");
      inserts.textContent = `Vklady: ${builderSelection.inserts.size ? [...builderSelection.inserts].join(", ") : "bez vklad≈Ø"}`;

      builderSummaryEl.append(base, cream, fruit, compote, inserts);
    }

    function buildBuilderClipboardText() {
      const insertsText = builderSelection.inserts.size ? [...builderSelection.inserts].join(", ") : "bez vklad≈Ø";
      return [
        "DORT - Sestav si s√°m",
        `Korpusy: ${builderSelection.base || "nevybr√°no"}`,
        `Kr√©my: ${builderSelection.cream || "nevybr√°no"}`,
        `Ovoce: ${builderSelection.fruit || "nevybr√°no"}`,
        `Vklady: ${insertsText}`
      ].join("\n");
    }

    function updateBuilderOptionStates() {
      builderPanelEl.querySelectorAll(".builder-option").forEach((optionBtn) => {
        const key = optionBtn.dataset.key;
        const value = optionBtn.dataset.value;
        const isActive = builderMultiKeys.has(key) ? builderSelection[key].has(value) : builderSelection[key] === value;
        optionBtn.classList.toggle("active", isActive);
        optionBtn.setAttribute("aria-pressed", String(isActive));
      });
    }

    function buildCustomizer() {
      builderMeta.forEach((meta) => {
        const group = builderPanelEl.querySelector(`.builder-group[data-key="${meta.key}"] .builder-options`);
        const options = getUniqueOptions(meta.key);

        options.forEach((value) => {
          const button = document.createElement("button");
          button.type = "button";
          button.className = "builder-option";
          button.textContent = value;
          button.dataset.key = meta.key;
          button.dataset.value = value;
          button.setAttribute("aria-pressed", "false");
          group.appendChild(button);
        });
      });

      updateBuilderOptionStates();
      renderBuilderSummary();
    }

    builderToggleEl.addEventListener("click", () => {
      setBuilderMode(builderViewEl.hidden);
    });

    builderPanelEl.addEventListener("click", (event) => {
      const target = event.target.closest(".builder-option");
      if (!target) {
        return;
      }

      const { key, value } = target.dataset;
      if (builderMultiKeys.has(key)) {
        if (builderSelection[key].has(value)) {
          builderSelection[key].delete(value);
        } else {
          builderSelection[key].add(value);
        }
      } else {
        builderSelection[key] = value;
      }

      updateBuilderOptionStates();
      renderBuilderSummary();
    });

    builderResetEl.addEventListener("click", () => {
      builderSelection.base = null;
      builderSelection.cream = null;
      builderSelection.fruit = null;
      builderSelection.compote = null;
      builderSelection.inserts.clear();
      updateBuilderOptionStates();
      renderBuilderSummary();
    });

    builderCopyEl.addEventListener("click", async () => {
      const text = buildBuilderClipboardText();
      try {
        await navigator.clipboard.writeText(text);
        builderCopyEl.textContent = "Zkop√≠rov√°no";
      } catch {
        builderCopyEl.textContent = "Kop√≠rov√°n√≠ selhalo";
      }
      setTimeout(() => {
        builderCopyEl.textContent = "Zkop√≠rovat v√Ωbƒõr";
      }, 1600);
    });

    cakes.forEach((cake, index) => {
      const li = document.createElement("li");
      const btn = document.createElement("button");
      btn.type = "button";
      btn.className = "cake-btn";

      const inner = document.createElement("span");
      inner.className = "cake-btn-inner";

      let emoji;
      if (cake.iconImage) {
        emoji = document.createElement("img");
        emoji.className = "cake-emoji-img";
        emoji.src = cake.iconImage;
        emoji.alt = `Ikona: ${cake.name}`;
      } else {
        emoji = document.createElement("span");
        emoji.className = "cake-emoji";
        emoji.textContent = cake.emoji || "üç∞";
      }

      const name = document.createElement("span");
      name.className = "cake-name";
      name.textContent = cake.name;

      inner.append(emoji, name);
      btn.appendChild(inner);

      btn.addEventListener("pointerenter", (event) => {
        if (event.pointerType === "mouse" && builderViewEl.hidden) {
          renderCake(index);
        }
      });
      btn.addEventListener("focus", () => {
        setBuilderMode(false);
        renderCake(index);
      });
      btn.addEventListener("click", () => {
        setBuilderMode(false);
        renderCake(index);
      });

      li.appendChild(btn);
      listEl.appendChild(li);
    });

    setBuilderMode(false);
    buildCustomizer();
    renderCake(0);
  </script>
</body>
</html>
